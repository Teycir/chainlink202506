# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.
# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [High Issues](#high-issues)
  - [H-1: Storage Array Edited with Memory](#h-1-storage-array-edited-with-memory)
  - [H-2: Reentrancy: State change after external call](#h-2-reentrancy-state-change-after-external-call)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk](#l-1-centralization-risk)
  - [L-2: Large Numeric Literal](#l-2-large-numeric-literal)
  - [L-3: Loop Contains `require`/`revert`](#l-3-loop-contains-requirerevert)
  - [L-4: Costly operations inside loop](#l-4-costly-operations-inside-loop)
  - [L-5: Unchecked Return](#l-5-unchecked-return)


# Summary

## Files Summary

| Key | Value |
| --- | --- |
| .sol Files | 1 |
| Total nSLOC | 440 |


## Files Details

| Filepath | nSLOC |
| --- | --- |
| src/BUILDFactory.sol | 440 |
| **Total** | **440** |


## Issue Summary

| Category | No. of Issues |
| --- | --- |
| High | 2 |
| Low | 5 |


# High Issues

## H-1: Storage Array Edited with Memory

Storage reference is passed to a function with a memory parameter. This will not update the storage variable as expected. Consider using storage parameters instead.

<details><summary>2 Found Instances</summary>


- Found in src/BUILDFactory.sol [Line: 466](../src/BUILDFactory.sol#L466)

	```solidity
	    return _calcMaxAvailableForWithdrawalOrNewSeason(s_tokenAmounts[token]);
	```

- Found in src/BUILDFactory.sol [Line: 547](../src/BUILDFactory.sol#L547)

	```solidity
	    uint256 maxAvailable = _calcMaxAvailableForWithdrawalOrNewSeason(s_tokenAmounts[token]);
	```

</details>



## H-2: Reentrancy: State change after external call

Changing state after an external call can lead to re-entrancy attacks.Use the checks-effects-interactions pattern to avoid this issue.

<details><summary>1 Found Instances</summary>


- Found in src/BUILDFactory.sol [Line: 102](../src/BUILDFactory.sol#L102)

	State is changed at: `project.admin = params.admin`
	```solidity
	        params.admin == address(0) || params.token == address(0)
	```

</details>



# Low Issues

## L-1: Centralization Risk

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>11 Found Instances</summary>


- Found in src/BUILDFactory.sol [Line: 96](../src/BUILDFactory.sol#L96)

	```solidity
	  ) external override whenOpen onlyRole(DEFAULT_ADMIN_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 118](../src/BUILDFactory.sol#L118)

	```solidity
	  ) external override whenOpen onlyRole(DEFAULT_ADMIN_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 179](../src/BUILDFactory.sol#L179)

	```solidity
	  ) external override onlyRole(DEFAULT_ADMIN_ROLE) whenOpen {
	```

- Found in src/BUILDFactory.sol [Line: 216](../src/BUILDFactory.sol#L216)

	```solidity
	  ) external override whenOpen onlyRole(DEFAULT_ADMIN_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 230](../src/BUILDFactory.sol#L230)

	```solidity
	  ) external override whenOpen onlyRole(DEFAULT_ADMIN_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 402](../src/BUILDFactory.sol#L402)

	```solidity
	  ) external override onlyRole(DEFAULT_ADMIN_ROLE) whenNotPaused {
	```

- Found in src/BUILDFactory.sol [Line: 488](../src/BUILDFactory.sol#L488)

	```solidity
	  ) external override onlyRole(DEFAULT_ADMIN_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 500](../src/BUILDFactory.sol#L500)

	```solidity
	  ) external override onlyRole(DEFAULT_ADMIN_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 560](../src/BUILDFactory.sol#L560)

	```solidity
	  ) external override onlyRole(PAUSER_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 570](../src/BUILDFactory.sol#L570)

	```solidity
	  ) external override onlyRole(PAUSER_ROLE) {
	```

- Found in src/BUILDFactory.sol [Line: 614](../src/BUILDFactory.sol#L614)

	```solidity
	  ) external onlyRole(DEFAULT_ADMIN_ROLE) {
	```

</details>



## L-2: Large Numeric Literal

Large literal values multiples of 10000 can be replaced with scientific notation.Use `e` notation, for example: `1e18`, instead of its full numeric value.

<details><summary>1 Found Instances</summary>


- Found in src/BUILDFactory.sol [Line: 68](../src/BUILDFactory.sol#L68)

	```solidity
	  uint256 private constant PERCENTAGE_BASIS_POINTS_DENOMINATOR = 10_000;
	```

</details>



## L-3: Loop Contains `require`/`revert`

Avoid `require` / `revert` statements in a loop because a single bad item can cause the whole transaction to fail. It's better to forgive on fail and return failed elements post processing of the loop

<details><summary>3 Found Instances</summary>


- Found in src/BUILDFactory.sol [Line: 99](../src/BUILDFactory.sol#L99)

	```solidity
	    for (uint256 i = 0; i < projectsLength; ++i) {
	```

- Found in src/BUILDFactory.sol [Line: 122](../src/BUILDFactory.sol#L122)

	```solidity
	    for (uint256 i = 0; i < tokensLength; ++i) {
	```

- Found in src/BUILDFactory.sol [Line: 231](../src/BUILDFactory.sol#L231)

	```solidity
	    for (uint256 i = 0; i < params.length; ++i) {
	```

</details>



## L-4: Costly operations inside loop

Invoking `SSTORE` operations in loops may waste gas. Use a local variable to hold the loop computation result.

<details><summary>3 Found Instances</summary>


- Found in src/BUILDFactory.sol [Line: 99](../src/BUILDFactory.sol#L99)

	```solidity
	    for (uint256 i = 0; i < projectsLength; ++i) {
	```

- Found in src/BUILDFactory.sol [Line: 122](../src/BUILDFactory.sol#L122)

	```solidity
	    for (uint256 i = 0; i < tokensLength; ++i) {
	```

- Found in src/BUILDFactory.sol [Line: 231](../src/BUILDFactory.sol#L231)

	```solidity
	    for (uint256 i = 0; i < params.length; ++i) {
	```

</details>



## L-5: Unchecked Return

Function returns a value but it is ignored. Consider checking the return value.

<details><summary>1 Found Instances</summary>


- Found in src/BUILDFactory.sol [Line: 109](../src/BUILDFactory.sol#L109)

	```solidity
	      s_projectsList.add(params.token);
	```

</details>



